<div>
    <mat-card>
        <mat-card-header style="display: flex;flex-direction: column;">
            <mat-card-title style="padding-bottom: 10px;display: flex;flex-direction: row;">
                <div style="display: flex;flex:1;justify-content: left;align-items: center;">
                    <span *ngIf="isSystemAdmin">
                        <app-lang-def-button [componentCode]="componentCode">
                        </app-lang-def-button>
                    </span>
                    {{uiLabels.subuscriptionList}}
                </div>

                <div class="row right" style="flex:1; justify-content: flex-end;align-items: center;" fxLayoutGap="30px">

                    <button mat-raised-button class="list-button" (click)="addNewCompanyDiolog()">{{uiLabels.addCompany}}</button>

                    <button mat-raised-button class="list-button" (click)="addBulkSubscription()">{{uiLabels.addBulkSubsButton}}</button>
                </div>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div fxLayout="column" [fxLayoutGap]="(isHandset$ | async) ? '10px' : '20px'" *ngIf="!(isHandset$ | async)">
                <div fxLayout="row">
                    <div fxFlex="0 1 150px" fxLayout="column" fxLayoutAlign="center end">
                        <mat-label>{{uiLabels.filterBy}}</mat-label>
                    </div>
                    <div fxFlex="0 1 40px" fxLayout="column" fxLayoutAlign="center center">
                        <mat-label>:</mat-label>
                    </div>
                    <div fxFlex="90 1 auto" fxLayoutAlign="start center" fxLayputGap="25px">
                        <mat-radio-group color="primary" aria-label="Select an option" [(ngModel)]="filterSelect" (ngModelChange)="searchByText()">
                            <div fxLayout="row" fxFlex="5 1 auto" style="margin-right: 60px;">
                                <mat-radio-button id="new" value={{confirmationFilter}}>{{uiLabels.new}}</mat-radio-button>
                            </div>
                            <div fxLayout="row" fxFlex="5 1 auto" style="margin-right: 60px;">
                                <mat-radio-button id="Accept" value={{acceptFilter}}>{{uiLabels.accept}}</mat-radio-button>
                            </div>
                            <div fxLayout="row" fxFlex="5 1 auto" style="margin-right: 60px;">
                                <mat-radio-button id="Temporary" value={{temporaryFilter}}>Temporary</mat-radio-button>
                            </div>
                            <div fxLayout="row" fxFlex="5 1 auto" style="margin-right: 60px;">
                                <mat-radio-button id="Reject" value={{rejectFilter}}>{{uiLabels.reject}}</mat-radio-button>
                            </div>

                            <div fxLayout="row" fxFlex="5 1 auto">
                                <mat-radio-button id="Suspend" value={{suspendFilter}}>{{uiLabels.suspend}}</mat-radio-button>
                            </div>

                        </mat-radio-group>
                    </div>
                </div>
            </div>

            <div fxLayout="column" [fxLayoutGap]="(isHandset$ | async) ? '10px' : '20px'" *ngIf="(isHandset$ | async)">
                <div fxLayout="row">
                    <div fxFlex="0 1 150px" fxLayout="column" fxLayoutAlign="center end">
                        <mat-label>{{uiLabels.filterBy}}</mat-label>
                    </div>
                    <div fxFlex="0 1 40px" fxLayout="column" fxLayoutAlign="center center">
                        <mat-label>:</mat-label>
                    </div>
                    <div fxFlex="90 1 auto" fxLayoutAlign="start center">
                        <mat-radio-group fxLayout="column wrap" color="primary" aria-label="Select an option" [(ngModel)]="filterSelect" (ngModelChange)="searchByText()">
                            <div fxLayout="row" fxFlex="5 1 auto" style="margin-right: 15px;">
                                <mat-radio-button id="new" value={{confirmationFilter}}>{{uiLabels.new}}</mat-radio-button>
                            </div>
                            <div fxLayout="row" fxFlex="5 1 auto" style="margin-right: 15px;">
                                <mat-radio-button id="Accept" value={{acceptFilter}}>{{uiLabels.accept}}</mat-radio-button>
                            </div>
                            <div fxLayout="row" fxFlex="5 1 auto">
                                <mat-radio-button id="Reject" value={{rejectFilter}}>{{uiLabels.reject}}</mat-radio-button>
                            </div>
                            <div fxLayout="row" fxFlex="5 1 auto">
                                <mat-radio-button id="Suspend" value={{suspendFilter}}>{{uiLabels.suspend}}</mat-radio-button>
                            </div>

                        </mat-radio-group>
                    </div>
                </div>
            </div>


        </mat-card-content>
    </mat-card>

    <mat-card>

        <app-search-pagination (searchByText)="searchByText()"></app-search-pagination>

        <mat-accordion style="width: 100%;" multi>
            <mat-expansion-panel *ngFor="let item of subscriptionList | responseFilter: filterSelect, index as i" class="common-list-item" [ngStyle]="{'background-color': selectedItem==item ? 'rgb(224, 224, 241)' : ''}" (click)="selectListItem(item)" style="margin: 5px;">
                <mat-expansion-panel-header style="background-color:  rgb(184 209 209);height: 100%;">
                    <div style="flex:1">

                        <div class="three-section-list-row" style="margin-bottom: 10px;" id="subscriptionItem-{{i}}">
                            <div class="list-value-section">
                                <div class="list-section-label">
                                    <mat-label>{{uiLabels.companyName}}</mat-label>
                                </div>

                                <div class="list-section-separator">
                                    <mat-label>:</mat-label>
                                </div>
                                <div class="list-section-value" style="font-weight: 500;">
                                    <mat-label id="companyName-{{i}}">{{item.companyName}}</mat-label>
                                </div>

                            </div>
                            <div class="list-value-section">
                                <div class="list-section-label">
                                    <mat-label>{{uiLabels.date}}</mat-label>
                                </div>

                                <div class="list-section-separator">
                                    <mat-label>:</mat-label>
                                </div>
                                <div class="list-section-value">
                                    <mat-label>{{item.frontendDate}}</mat-label>
                                </div>

                            </div>
                            <div class="list-value-section">
                                <div class="list-section-label">
                                    <mat-label>{{uiLabels.status}}</mat-label>
                                </div>

                                <div class="list-section-separator">
                                    <mat-label>:</mat-label>
                                </div>
                                <div class="list-section-value">
                                    <mat-chip style="background-color: rgb(202, 202, 226);"> {{item.status.statusTitle}}</mat-chip>
                                    <!-- <mat-label>{{item.status.statusTitle}}</mat-label> -->
                                </div>

                            </div>
                        </div>
                    </div>

                </mat-expansion-panel-header>

                <div style="flex:1">

                    <div class="three-section-list-row" style="margin-bottom: 10px;">
                        <div class="list-value-section">
                            <div class="list-section-label">
                                <mat-label>{{uiLabels.address}}</mat-label>
                            </div>

                            <div class="list-section-separator">
                                <mat-label>:</mat-label>
                            </div>
                            <div class="list-section-value" style="font-weight: 500;">
                                <mat-label>{{item.zipCode}},{{item.address}}</mat-label>
                            </div>

                        </div>
                        <div class="list-value-section">
                            <div class="list-section-label">
                                <mat-label>{{uiLabels.type}} </mat-label>
                            </div>

                            <div class="list-section-separator">
                                <mat-label>:</mat-label>
                            </div>
                            <div class="list-section-value">
                                <div>
                                    <mat-label *ngFor="let category of item.companyCategory, index as i"><span *ngIf="i>0">,&nbsp; </span>{{uiLabels[category]}}</mat-label>
                                </div>
                            </div>

                        </div>


                    </div>


                </div>
                <div style="flex:1">

                    <div class="three-section-list-row" style="margin-bottom: 10px;">
                        <div class="list-value-section">
                            <div class="list-section-label">
                                <mat-label>{{uiLabels.contactNo}}</mat-label>
                            </div>

                            <div class="list-section-separator">
                                <mat-label>:</mat-label>
                            </div>
                            <div class="list-section-value" style="font-weight: 500;">
                                <mat-label>{{item.contactNo}}</mat-label>
                            </div>

                        </div>
                        <div class="list-value-section">
                            <div class="list-section-label">

                            </div>

                            <div class="list-section-separator">

                            </div>
                            <div class="list-section-value">
                                <div class="list-section-value" style=" margin-right: 25px;" *ngFor="let eachProcess of item.processsList">

                                    <button mat-raised-button class="list-button-light" style="margin-top: 15px" id="{{eachProcess.processId}}-{{i}}" (click)="updateStatus(item,eachProcess)">{{eachProcess.processTitle}}</button>

                                </div>
                                <div class="list-section-value" style=" margin-right: 25px;">
                                    <button id="detailButton-{{i}}" mat-raised-button class="list-button-light" style="margin-top: 15px" (click)="openSelectedSubscriptionDialog(item)">{{uiLabels.detail}}</button>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>

            </mat-expansion-panel>
        </mat-accordion>

        <mat-label *ngIf="subscriptionList.length<pageSize" style="padding: 10px;">{{dataEndsLabel}}</mat-label>

    </mat-card>
</div>